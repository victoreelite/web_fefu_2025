{% extends "fefu_lab/base.html" %}
{% block title %}Главная страница - FEFU Lab{% endblock %}
{% block content %}
<div class="student-info">
    <h1>Welcome to FEFU Lab</h1>
    <p>Это учебный тестовый проект.</p>
    <!-- СТАТИСТИКА ИЗ БД -->
    <div class="stats-grid" style="margin: 2rem 0;">
        <div class="stat-card">
            <h3>{{ total_students }}</h3>
            <p>Активных студентов</p>
        </div>
        <div class="stat-card">
            <h3>{{ total_courses }}</h3>
            <p>Доступных курсов</p>
        </div>
        <div class="stat-card">
            <h3>{{ total_instructors }}</h3>
            <p>Преподавателей</p>
        </div>
    </div>
    <div class="info-grid">
        <div>
            <div class="info-item">
                <a href="/about/" class="btn">About</a>
            </div>
            <div class="info-item">
                <a href="/student/1/" class="btn">Students</a>
            </div>
            <div class="info-item">
                <a href="/feedback/" class="btn">Feedback</a>
            </div>
            <div class="info-item">
                <a href="/register/" class="btn">Register</a>
            </div>
        </div>
        <div>
            <h3>Courses from Database</h3>
            <!-- ДИНАМИЧЕСКИЕ КУРСЫ ИЗ БД -->
            {% if recent_courses %}
                {% for course in recent_courses %}
                <div class="info-item">
                    <a href="{% url 'course_detail' course.slug %}" class="btn">
                        {{ course.title|truncatechars:25 }}
                    </a>
                </div>
                {% endfor %}
            {% else %}
                <div class="info-item">
                    <p class="no-data">Курсы пока не добавлены</p>
                    <a href="/admin/fefu_lab/course/add/" class="btn-small">Добавить курс</a>
                </div>
            {% endif %}
        </div>
    </div>
    <!-- НОВЫЕ КУРСЫ (КАРТОЧКИ) -->
    {% if recent_courses %}
    <div class="recent-courses" style="margin-top: 3rem;">
        <h2>New Courses</h2>
        <div class="courses-grid">
            {% for course in recent_courses %}
            <div class="course-card">
                <h3>{{ course.title }}</h3>
                <p><strong>Instructor:</strong> 
                    {% if course.instructor %}
                        {{ course.instructor.full_name }}
                    {% else %}
                        Not assigned
                    {% endif %}
                </p>
                <p><strong>Duration:</strong> {{ course.duration }} hours</p>
                <p><strong>Level:</strong> {{ course.get_level_display }}</p>
                <a href="{% url 'course_detail' course.slug %}" class="btn">Details</a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}